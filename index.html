<!DOCTYPE html>
<html lang="en">

<head>
	<title>Michael Jereme Hancock - Resumé</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
	<meta name="description" content="The Resumé of Michael Jereme Hancock." />

	<meta property="og:title" content="Michael Jereme Hancock - Resumé" />
	<meta property="og:type" content="website" />
	<meta property="og:description" content="The Resumé of Michael Jereme Hancock." />
	<meta property="og:url" content="https://jeremehancock.com" />
	<meta property="og:image" content="https://jeremehancock.com/images/profile.jpg" />
	<meta property="og:site_name" content="jeremehancock.com" />
	<link
		href='https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap'
		rel='stylesheet'>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.css">
	<link rel="icon" type="image/png" href="/images/favicons/favicon-96x96.png" sizes="96x96" />
	<link rel="icon" type="image/svg+xml" href="/images/favicons/favicon.svg" />
	<link rel="shortcut icon" href="/images/favicons/favicon.ico" />
	<link rel="apple-touch-icon" sizes="180x180" href="/images/favicons/apple-touch-icon.png" />
	<link rel="manifest" href="site.webmanifest" />
	<style>
		:root {
			--bg-primary: #0a0a0a;
			--bg-secondary: #1a1a1a;
			--bg-tertiary: #2a2a2a;
			--text-primary: #ffffff;
			--text-secondary: #b3b3b3;
			--text-muted: #666666;
			--accent-primary: #00d4ff;
			--accent-secondary: #ff6b6b;
			--accent-tertiary: #4ecdc4;
			--gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
			--gradient-secondary: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
			--gradient-tertiary: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
			--gradient-bg: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
			--shadow-glass: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
			--border-glass: 1px solid rgba(255, 255, 255, 0.18);
			--font-primary: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
			--font-mono: 'JetBrains Mono', monospace;

			/* Dynamic viewport height for mobile */
			--vh: 1vh;
			--mobile-vh: 1vh;
		}

		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		html {
			scroll-behavior: smooth;
			scroll-padding-top: 60px;
			/* Reduce offset to scroll further down */
			overflow-x: hidden;
			height: 100%;
			/* Prevent initial scroll issues */
			overscroll-behavior: none;
		}

		body {
			font-family: var(--font-primary);
			background: var(--bg-primary);
			color: var(--text-primary);
			line-height: 1.6;
			overflow-x: hidden;
			-webkit-font-smoothing: antialiased;
			-moz-osx-font-smoothing: grayscale;
			position: relative;
			margin: 0;
			padding: 0;
			/* Use dynamic height calculation */
			min-height: calc(var(--mobile-vh, 1vh) * 100);
			width: 100%;
			/* Prevent address bar issues */
			-webkit-overflow-scrolling: touch;
			overscroll-behavior: none;
		}

		/* Animated Background */
		.animated-bg {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: calc(var(--mobile-vh, 1vh) * 100);
			z-index: -1;
			background: radial-gradient(ellipse at top, #1e3c72 0%, #0a0a0a 70%);
		}

		.animated-bg::before {
			content: '';
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background: url('data:image/svg+xml,<svg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><g fill="%23ffffff" fill-opacity="0.02"><circle cx="30" cy="30" r="2"/></g></svg>') repeat;
			animation: float 20s ease-in-out infinite;
		}

		@keyframes float {

			0%,
			100% {
				transform: translateY(0px) rotate(0deg);
			}

			50% {
				transform: translateY(-20px) rotate(180deg);
			}
		}

		/* Loading Screen - Fixed for mobile */
		.loading {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: calc(var(--mobile-vh, 1vh) * 100);
			background: var(--bg-primary);
			display: flex;
			justify-content: center;
			align-items: center;
			z-index: 9999;
			overflow: hidden;
			/* Ensure it covers the entire viewport */
			margin: 0;
			padding: 0;
		}

		.loading-content {
			text-align: center;
		}

		.loading-spinner {
			width: 60px;
			height: 60px;
			border: 3px solid rgba(0, 212, 255, 0.1);
			border-radius: 50%;
			border-top-color: var(--accent-primary);
			animation: spin 1s ease-in-out infinite;
			margin: 0 auto 1rem;
		}

		.loading-text {
			font-size: 1.2rem;
			color: var(--accent-primary);
			font-weight: 500;
			letter-spacing: 2px;
			animation: pulse 2s ease-in-out infinite;
		}

		@keyframes spin {
			to {
				transform: rotate(360deg);
			}
		}

		@keyframes pulse {

			0%,
			100% {
				opacity: 1;
			}

			50% {
				opacity: 0.5;
			}
		}

		/* Navigation */
		.navbar {
			position: fixed;
			top: 0;
			left: 0;
			right: 0;
			height: 60px;
			background: rgba(10, 10, 10, 0.8);
			backdrop-filter: blur(20px);
			border-bottom: 1px solid rgba(255, 255, 255, 0.1);
			z-index: 1001;
			transition: all 0.3s ease;
		}

		.navbar.scrolled {
			background: rgba(10, 10, 10, 0.95);
			height: 55px;
		}

		.nav-container {
			max-width: 1400px;
			height: 100%;
			margin: 0 auto;
			padding: 0 2rem;
			display: flex;
			justify-content: center;
			/* Center the navigation on desktop */
			align-items: center;
		}

		.nav-links {
			display: flex;
			gap: 2rem;
			list-style: none;
		}

		.nav-links a {
			color: var(--text-secondary);
			text-decoration: none;
			font-weight: 500;
			position: relative;
			transition: all 0.3s ease;
			padding: 0.5rem 1rem;
			border-radius: 8px;
		}

		.nav-links a.active {
			color: var(--text-primary);
			background: rgba(255, 255, 255, 0.1);
		}

		.nav-links a.active::before {
			width: 80%;
		}

		.nav-links a::before {
			content: '';
			position: absolute;
			bottom: 0;
			left: 50%;
			width: 0;
			height: 2px;
			background: var(--gradient-tertiary);
			transform: translateX(-50%);
			transition: width 0.3s ease;
		}

		.nav-links a:hover {
			color: var(--text-primary);
			background: rgba(255, 255, 255, 0.05);
		}

		.nav-links a:hover::before {
			width: 80%;
		}

		.menu-button {
			display: none;
			/* Hide menu button completely */
		}

		/* Container */
		.container {
			max-width: 1400px;
			margin: 0 auto;
			padding: 0 2rem;
		}

		/* Section Styling - Fixed for mobile */
		section {
			min-height: calc(var(--mobile-vh, 1vh) * 100);
			display: flex;
			align-items: center;
			padding: 8rem 0;
			/* Increase padding for better section separation */
			position: relative;
		}

		/* Hero Section - Fixed for mobile */
		.hero {
			position: relative;
			background: var(--gradient-bg);
			overflow: hidden;
			/* Ensure proper height on mobile */
			min-height: calc(var(--mobile-vh, 1vh) * 100);
			display: flex;
			align-items: center;
			padding: 8rem 0;
		}

		.hero .container {
			margin-top: 60px;
			/* Account for smaller fixed navbar */
			width: 100%;
		}

		.hero::before {
			content: '';
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			background: rgba(0, 0, 0, 0.3);
		}

		.hero-particles {
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			overflow: hidden;
		}

		.particle {
			position: absolute;
			background: var(--accent-primary);
			border-radius: 50%;
			opacity: 0.6;
			animation: float-particle 6s ease-in-out infinite;
		}

		@keyframes float-particle {

			0%,
			100% {
				transform: translateY(0px) translateX(0px);
			}

			25% {
				transform: translateY(-20px) translateX(10px);
			}

			50% {
				transform: translateY(-40px) translateX(-10px);
			}

			75% {
				transform: translateY(-20px) translateX(5px);
			}
		}

		.hero-content {
			position: relative;
			z-index: 2;
			display: grid;
			grid-template-columns: 1fr 2fr;
			gap: 4rem;
			align-items: center;
			width: 100%;
		}

		.hero-image-container {
			position: relative;
		}

		.hero-image-wrapper {
			position: relative;
			width: 300px;
			height: 300px;
			margin: 0 auto;
		}

		.hero-profile-img {
			width: 100%;
			height: 100%;
			border-radius: 50%;
			object-fit: cover;
			border: 4px solid rgba(255, 255, 255, 0.2);
			box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
			transition: all 0.3s ease;
		}

		.hero-text h1 {
			font-size: clamp(3rem, 8vw, 6rem);
			font-weight: 800;
			line-height: 1.1;
			margin-bottom: 1.5rem;
			background: linear-gradient(135deg, #ffffff 0%, #00d4ff 100%);
			-webkit-background-clip: text;
			-webkit-text-fill-color: transparent;
			background-clip: text;
			animation: slide-up 1s ease-out;
		}

		.hero-text p {
			font-size: 1.3rem;
			color: var(--text-secondary);
			margin-bottom: 2rem;
			line-height: 1.6;
			animation: slide-up 1s ease-out 0.2s both;
		}

		@keyframes slide-up {
			from {
				opacity: 0;
				transform: translateY(50px);
			}

			to {
				opacity: 1;
				transform: translateY(0);
			}
		}

		/* Contact Links */
		.contact-links {
			display: flex;
			flex-wrap: wrap;
			gap: 1rem;
			margin-top: 2rem;
			animation: slide-up 1s ease-out 0.4s both;
		}

		.contact-link {
			display: inline-flex;
			align-items: center;
			gap: 0.5rem;
			padding: 0.8rem 1.5rem;
			background: rgba(255, 255, 255, 0.1);
			backdrop-filter: blur(10px);
			border: var(--border-glass);
			border-radius: 50px;
			color: var(--text-primary);
			text-decoration: none;
			font-weight: 500;
			transition: all 0.3s ease;
			position: relative;
			overflow: hidden;
		}

		.contact-link::before {
			content: '';
			position: absolute;
			top: 0;
			left: -100%;
			width: 100%;
			height: 100%;
			background: var(--gradient-tertiary);
			transition: left 0.3s ease;
			z-index: -1;
		}

		.contact-link:hover::before {
			left: 0;
		}

		.contact-link:hover {
			transform: translateY(-2px);
			box-shadow: var(--shadow-glass);
			border-color: var(--accent-primary);
		}

		.contact-link i {
			color: var(--accent-primary);
			transition: all 0.3s ease;
		}

		.contact-link:hover i {
			color: white;
			transform: scale(1.1);
		}

		/* Section Titles */
		.section-title {
			font-size: 3.5rem;
			font-weight: 800;
			text-align: center;
			margin-bottom: 4rem;
			position: relative;
			background: var(--gradient-secondary);
			-webkit-background-clip: text;
			-webkit-text-fill-color: transparent;
			background-clip: text;
		}

		.section-title::after {
			content: '';
			position: absolute;
			bottom: -10px;
			left: 50%;
			width: 100px;
			height: 4px;
			background: var(--gradient-secondary);
			transform: translateX(-50%);
			border-radius: 2px;
		}

		/* Projects Section */
		#projects {
			background: var(--bg-secondary);
			position: relative;
		}

		.projects-grid {
			display: grid;
			grid-template-columns: repeat(3, 1fr);
			gap: 2rem;
			width: 100%;
		}

		.project-card {
			background: rgba(255, 255, 255, 0.05);
			backdrop-filter: blur(10px);
			border: var(--border-glass);
			border-radius: 20px;
			overflow: hidden;
			transition: all 0.4s ease;
			cursor: pointer;
			position: relative;
			group: hover;
		}

		.project-card::before {
			content: '';
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			background: var(--gradient-primary);
			opacity: 0;
			transition: opacity 0.3s ease;
			border-radius: 20px;
		}

		.project-card:hover::before {
			opacity: 0.1;
		}

		.project-card:hover {
			transform: translateY(-10px) scale(1.02);
			box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
			border-color: var(--accent-primary);
		}

		.project-image {
			position: relative;
			height: 250px;
			overflow: hidden;
		}

		.project-image img {
			width: 100%;
			height: 100%;
			object-fit: cover;
			transition: all 0.4s ease;
		}

		.project-card:hover .project-image img {
			transform: scale(1.1);
		}

		.project-overlay {
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			background: linear-gradient(45deg, rgba(0, 212, 255, 0.8), rgba(255, 107, 107, 0.8));
			opacity: 0;
			display: flex;
			align-items: center;
			justify-content: center;
			transition: opacity 0.3s ease;
		}

		.project-card:hover .project-overlay {
			opacity: 1;
		}

		.project-overlay i {
			font-size: 3rem;
			color: white;
			animation: bounce 2s infinite;
		}

		@keyframes bounce {

			0%,
			20%,
			50%,
			80%,
			100% {
				transform: translateY(0);
			}

			40% {
				transform: translateY(-10px);
			}

			60% {
				transform: translateY(-5px);
			}
		}

		.project-content {
			padding: 2rem;
			position: relative;
			z-index: 2;
		}

		.project-content h3 {
			font-size: 1.5rem;
			font-weight: 700;
			margin-bottom: 1rem;
			color: var(--text-primary);
		}

		.project-content p {
			color: var(--text-secondary);
			line-height: 1.6;
		}

		/* Resume Section */
		#resume {
			background: var(--bg-primary);
		}

		.resume-container {
			display: flex;
			flex-direction: column;
			gap: 2rem;
			width: 100%;
		}

		.resume-item {
			background: rgba(255, 255, 255, 0.03);
			backdrop-filter: blur(10px);
			border: var(--border-glass);
			border-radius: 16px;
			padding: 2.5rem;
			position: relative;
			transition: all 0.4s ease;
			overflow: hidden;
		}

		.resume-item::before {
			content: '';
			position: absolute;
			top: 0;
			left: -100%;
			width: 100%;
			height: 100%;
			background: linear-gradient(90deg, transparent, rgba(0, 212, 255, 0.1), transparent);
			transition: left 0.6s ease;
		}

		.resume-item:hover::before {
			left: 100%;
		}

		.resume-item:hover {
			transform: translateX(10px);
			border-color: var(--accent-primary);
			box-shadow: var(--shadow-glass);
		}

		.resume-header {
			display: flex;
			justify-content: space-between;
			align-items: flex-start;
			margin-bottom: 1.5rem;
			gap: 1rem;
		}

		.resume-title-group {
			flex: 1;
		}

		.resume-position {
			font-size: 1.3rem;
			font-weight: 700;
			color: var(--text-primary);
			margin-bottom: 0.5rem;
		}

		.resume-company {
			font-size: 1.1rem;
			color: var(--accent-primary);
			font-weight: 500;
		}

		.resume-date {
			background: var(--gradient-tertiary);
			-webkit-background-clip: text;
			-webkit-text-fill-color: transparent;
			background-clip: text;
			font-weight: 600;
			font-family: var(--font-mono);
			white-space: nowrap;
		}

		.resume-highlights {
			list-style: none;
		}

		.resume-highlights li {
			color: var(--text-secondary);
			margin-bottom: 0.8rem;
			padding-left: 2rem;
			position: relative;
			line-height: 1.6;
		}

		.resume-highlights li::before {
			content: '▶';
			position: absolute;
			left: 0;
			color: var(--accent-primary);
			font-size: 0.8rem;
			top: 0.1rem;
		}

		/* Animations */
		.fade-up {
			opacity: 0;
			transform: translateY(30px);
			transition: all 0.6s ease;
		}

		.fade-up.visible {
			opacity: 1;
			transform: translateY(0);
		}

		.slide-in-left {
			opacity: 0;
			transform: translateX(-50px);
			transition: all 0.6s ease;
		}

		.slide-in-left.visible {
			opacity: 1;
			transform: translateX(0);
		}

		.slide-in-right {
			opacity: 0;
			transform: translateX(50px);
			transition: all 0.6s ease;
		}

		.slide-in-right.visible {
			opacity: 1;
			transform: translateX(0);
		}

		/* Copyright */
		.copyright {
			text-align: center;
			padding: 2rem;
			color: var(--text-muted);
			font-size: 0.9rem;
			border-top: 1px solid rgba(255, 255, 255, 0.1);
			background: var(--bg-secondary);
		}

		/* Utility */
		.hidden {
			display: none;
		}

		/* Responsive Design */
		@media (max-width: 1200px) {
			.projects-grid {
				grid-template-columns: repeat(2, 1fr);
			}
		}

		@media (max-width: 1024px) {
			.hero-content {
				grid-template-columns: 1fr;
				text-align: center;
				gap: 3rem;
			}

			.section-title {
				font-size: 2.5rem;
			}
		}

		@media (max-width: 768px) {
			.container {
				padding: 0 1rem;
			}

			.nav-container {
				justify-content: center;
				/* Center the nav links on mobile too */
			}

			.nav-links {
				gap: 1rem;
				/* Reduce gap on mobile for better spacing */
			}

			.nav-links a {
				padding: 0.5rem 0.8rem;
				/* Slightly smaller padding on mobile */
				font-size: 0.9rem;
				/* Slightly smaller text on mobile */
			}

			.hero {
				padding: 6rem 0;
				/* Reduce padding on mobile */
			}

			.hero .container {
				margin-top: 40px;
				/* Smaller offset for mobile with shorter navbar */
			}

			.projects-grid {
				grid-template-columns: 1fr;
			}

			.hero-image-wrapper {
				width: 250px;
				height: 250px;
			}

			.hero-text h1 {
				font-size: 2.5rem;
			}

			.contact-links {
				justify-content: center;
			}

			.section-title {
				font-size: 2rem;
			}

			.resume-header {
				flex-direction: column;
				align-items: flex-start;
			}

			.resume-item {
				padding: 1.5rem;
			}

			section {
				padding: 6rem 0;
				/* Maintain larger padding on mobile for better separation */
			}
		}

		@media (max-width: 480px) {
			.hero {
				padding: 4rem 0;
				/* Even smaller padding on very small screens */
			}

			.nav-links {
				gap: 0.5rem;
				/* Even smaller gap on very small screens */
			}

			.nav-links a {
				padding: 0.4rem 0.6rem;
				/* Smaller padding for very small screens */
				font-size: 0.85rem;
				/* Smaller text for very small screens */
			}

			.hero-text h1 {
				font-size: 2rem;
			}

			.contact-link {
				padding: 0.6rem 1rem;
				font-size: 0.9rem;
			}
		}

		/* iOS Safari specific fixes */
		@supports (-webkit-appearance: none) {

			.loading,
			.hero,
			.animated-bg,
			section {
				min-height: -webkit-fill-available;
			}
		}
	</style>
</head>

<body>
	<div class="animated-bg"></div>

	<div class="loading">
		<div class="loading-content">
			<div class="loading-spinner"></div>
			<div class="loading-text">Loading</div>
		</div>
	</div>

	<div id="content" class="hidden">
		<!-- Navigation -->
		<nav class="navbar">
			<div class="nav-container">
				<ul class="nav-links">
					<li><a href="#contact" class="active">Contact</a></li>
					<li><a href="#projects">Projects</a></li>
					<li><a href="#resume">Resumé</a></li>
				</ul>
			</div>
		</nav>

		<!-- Hero Section -->
		<section class="hero" id="contact">
			<div class="hero-particles"></div>
			<div class="container">
				<div class="hero-content">
					<div class="hero-image-container">
						<div class="hero-image-wrapper">
							<img class="hero-profile-img" id="profileImg" alt="">
						</div>
					</div>
					<div class="hero-text">
						<h1 id="name"></h1>
						<p id="headline"></p>
						<div class="contact-links" id="contactLinks">
							<!-- Contact links will be inserted here -->
						</div>
					</div>
				</div>
			</div>
		</section>

		<!-- Projects Section -->
		<section id="projects">
			<div class="container">
				<h2 class="section-title fade-up">Projects</h2>
				<div class="projects-grid" id="projectsGrid">
					<!-- Projects will be inserted here -->
				</div>
			</div>
		</section>

		<!-- Resume Section -->
		<section id="resume">
			<div class="container">
				<h2 class="section-title fade-up">Resumé</h2>
				<div class="resume-container" id="resumeContainer">
					<!-- Resume items will be inserted here -->
				</div>
			</div>
		</section>

		<div class="copyright">
			<script>
				today = new Date();
				y0 = today.getFullYear();
				document.write('© 2004-' + y0);
			</script>
		</div>
	</div>

	<script>
		// Navigation state variables
		let scrollTimeout = null;
		let lastActiveSection = null;
		let clickTimeout = null;

		// Mobile viewport height calculation
		function setMobileVH() {
			const vh = window.innerHeight * 0.01;
			document.documentElement.style.setProperty('--mobile-vh', `${vh}px`);
		}

		// Get all sections and nav links
		function getNavigationElements() {
			const sections = ['contact', 'projects', 'resume'];
			const navLinks = document.querySelectorAll('.nav-links a');
			return { sections, navLinks };
		}

		// Set active navigation link (single source of truth)
		function setActiveNavLink(activeSection) {
			// Remove the lastActiveSection check temporarily to ensure updates always happen
			// if (lastActiveSection === activeSection) return;

			lastActiveSection = activeSection;

			const { navLinks } = getNavigationElements();

			// Use requestAnimationFrame to ensure atomic DOM updates
			requestAnimationFrame(() => {
				// Clear ALL active states first - be very explicit
				navLinks.forEach(link => {
					link.classList.remove('active');
				});

				// Double-check by also querying for any active links and clearing them
				document.querySelectorAll('.nav-links a.active').forEach(link => {
					link.classList.remove('active');
				});

				// Now set exactly one active link
				const activeLink = document.querySelector(`.nav-links a[href="#${activeSection}"]`);
				if (activeLink) {
					activeLink.classList.add('active');
				}

				// Debug logging (remove this later)
				console.log(`Active section set to: ${activeSection}`);
			});
		}

		// Determine which section should be active based on scroll position
		function getActiveSection() {
			const { sections } = getNavigationElements();
			const scrollPosition = window.pageYOffset;
			const windowHeight = window.innerHeight;
			const documentHeight = document.documentElement.scrollHeight;
			const navbarHeight = 60;

			// Debug logging
			console.log(`Scroll position: ${scrollPosition}, Window height: ${windowHeight}`);

			// If we're near the bottom of the page, always show the last section
			if (scrollPosition + windowHeight >= documentHeight - 100) {
				console.log('Near bottom, returning resume');
				return sections[sections.length - 1];
			}

			// If we're at the very top, always show the first section
			if (scrollPosition < 100) {
				console.log('At top, returning contact');
				return sections[0];
			}

			// Check each section and find which one is most prominently displayed
			let activeSection = sections[0];
			let bestScore = -1;

			sections.forEach(sectionId => {
				const section = document.getElementById(sectionId);
				if (!section) return;

				const rect = section.getBoundingClientRect();
				const sectionTop = rect.top;
				const sectionBottom = rect.bottom;
				const sectionHeight = rect.height;

				// Calculate how much of the section is visible
				const visibleTop = Math.max(sectionTop, navbarHeight);
				const visibleBottom = Math.min(sectionBottom, windowHeight);
				const visibleHeight = Math.max(0, visibleBottom - visibleTop);
				const visibilityRatio = sectionHeight > 0 ? visibleHeight / sectionHeight : 0;

				// Prefer sections that have their top part visible (within first 40% of viewport)
				const sectionTopInViewport = sectionTop <= windowHeight * 0.4;
				const topBonus = sectionTopInViewport ? 0.3 : 0;

				const combinedScore = visibilityRatio + topBonus;

				console.log(`Section ${sectionId}: visibility=${visibilityRatio.toFixed(2)}, topBonus=${topBonus}, score=${combinedScore.toFixed(2)}`);

				// If this section has a better score and is reasonably visible
				if (combinedScore > bestScore && visibilityRatio > 0.2) {
					bestScore = combinedScore;
					activeSection = sectionId;
				}
			});

			console.log(`Best section: ${activeSection} with score: ${bestScore.toFixed(2)}`);
			return activeSection;
		}

		// Handle scroll events
		function handleScroll() {
			console.log('Scroll event fired'); // Debug logging

			// Clear any existing timeout
			if (scrollTimeout) {
				clearTimeout(scrollTimeout);
			}

			// Update navbar scroll effect immediately
			const navbar = document.querySelector('.navbar');
			const scrolled = window.pageYOffset > 50;
			navbar.classList.toggle('scrolled', scrolled);

			// Always update active section based on scroll position - no blocking
			scrollTimeout = setTimeout(() => {
				console.log('Scroll timeout fired, updating active section');
				const activeSection = getActiveSection();
				setActiveNavLink(activeSection);
			}, 50);
		}

		// Handle smooth scrolling to sections
		function scrollToSection(targetId) {
			const targetElement = document.getElementById(targetId);
			if (!targetElement) return;

			console.log(`Clicking link to scroll to: ${targetId}`); // Debug logging

			// Clear any existing timeout
			if (clickTimeout) {
				clearTimeout(clickTimeout);
			}

			// Immediately set the clicked link as active (this will clear all others)
			setActiveNavLink(targetId);

			// Calculate scroll position
			const navbarHeight = document.querySelector('.navbar').offsetHeight;
			const targetPosition = targetElement.offsetTop - navbarHeight - 20;

			console.log(`Scrolling to position: ${targetPosition}`); // Debug logging

			// Perform smooth scroll
			window.scrollTo({
				top: targetPosition,
				behavior: 'smooth'
			});

			// Don't block scroll spy - let it take over immediately
			// Remove any delays or blocking
		}

		// Initialize navigation system
		function initializeNavigation() {
			// Set up click handlers for navigation links
			document.querySelectorAll('a[href^="#"]').forEach(anchor => {
				anchor.addEventListener('click', function (e) {
					e.preventDefault();
					const targetId = this.getAttribute('href').substring(1);
					scrollToSection(targetId);
				});
			});

			// Set up scroll event listener
			window.addEventListener('scroll', handleScroll, { passive: true });

			// Set initial active state
			setTimeout(() => {
				setActiveNavLink('contact');
			}, 100);
		}

		// Force scroll to top and reset navigation
		function forceScrollToTop() {
			if ('scrollRestoration' in history) {
				history.scrollRestoration = 'manual';
			}

			// Clear all timeouts
			if (scrollTimeout) {
				clearTimeout(scrollTimeout);
				scrollTimeout = null;
			}
			if (clickTimeout) {
				clearTimeout(clickTimeout);
				clickTimeout = null;
			}

			window.scrollTo({ top: 0, left: 0, behavior: 'instant' });
			document.documentElement.scrollTop = 0;
			document.body.scrollTop = 0;

			// Reset navigation state
			lastActiveSection = null;

			// Force layout recalculation
			document.body.offsetHeight;

			// Set contact as active since we're at the top
			setTimeout(() => {
				setActiveNavLink('contact');
			}, 10);
		}

		// Particle animation
		function createParticles() {
			const particles = document.querySelector('.hero-particles');
			if (!particles) return;

			for (let i = 0; i < 50; i++) {
				const particle = document.createElement('div');
				particle.className = 'particle';
				particle.style.left = Math.random() * 100 + '%';
				particle.style.top = Math.random() * 100 + '%';
				particle.style.width = particle.style.height = (Math.random() * 4 + 1) + 'px';
				particle.style.animationDelay = Math.random() * 6 + 's';
				particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
				particles.appendChild(particle);
			}
		}

		async function loadResumeData() {
			try {
				const response = await fetch('data/data.json');
				const data = await response.json();
				return data;
			} catch (error) {
				console.error('Error loading resume data:', error);
				return null;
			}
		}

		function createContactLinks(contacts) {
			return contacts.map(contact => `
                <a href="${contact.url}" class="contact-link" target="_blank">
                    <i class="${contact.icon}"></i>
                    <span>${contact.value}</span>
                </a>
            `).join('');
		}

		function createProjectCard(project, index) {
			return `
                <div class="project-card fade-up" onclick="window.open('${project.url}', '_blank')" style="animation-delay: ${index * 0.1}s">
                    <div class="project-image">
                        <img src="${project.image}" alt="${project.name}"/>
                        <div class="project-overlay">
                            <i class="fas fa-external-link-alt"></i>
                        </div>
                    </div>
                    <div class="project-content">
                        <h3>${project.name}</h3>
                        <p>${project.description}</p>
                    </div>
                </div>
            `;
		}

		function createResumeItem(item, index) {
			const highlights = item.highlights.map(highlight =>
				`<li>${highlight}</li>`
			).join('');

			const animationClass = index % 2 === 0 ? 'slide-in-left' : 'slide-in-right';

			let titleHtml = '';
			if (item.type === 'education') {
				titleHtml = `
					<div class="resume-title-group">
						<div class="resume-position">${item.studyType} in ${item.area}</div>
						<div class="resume-company">${item.institution}</div>
					</div>
				`;
			} else {
				titleHtml = `
					<div class="resume-title-group">
						<div class="resume-position">${item.position}</div>
						${item.company ? `<div class="resume-company">${item.company}</div>` : ''}
					</div>
				`;
			}

			let dateHtml = '';
			if (item.startDate || item.endDate) {
				const startDate = item.startDate || '';
				const endDate = item.endDate || '';
				const separator = (item.startDate && item.endDate) ? ' - ' : '';
				dateHtml = `<div class="resume-date">${startDate}${separator}${endDate}</div>`;
			}

			return `
				<div class="resume-item ${animationClass}" style="animation-delay: ${index * 0.1}s">
					<div class="resume-header">
						${titleHtml}
						${dateHtml}
					</div>
					<ul class="resume-highlights">
						${highlights}
					</ul>
				</div>
			`;
		}

		async function initializePage() {
			const data = await loadResumeData();

			if (!data) {
				document.querySelector('.loading-text').textContent = 'Error loading data';
				return;
			}

			// Set basic information
			document.getElementById('name').textContent = data.basics.name;
			document.getElementById('headline').textContent = data.basics.headline;
			document.getElementById('profileImg').src = data.basics.image;

			// Render contact links
			const contactLinks = document.getElementById('contactLinks');
			contactLinks.innerHTML = createContactLinks(data.basics.contacts);

			// Render projects
			const projectsGrid = document.getElementById('projectsGrid');
			projectsGrid.innerHTML = data.projects.map((project, index) =>
				createProjectCard(project, index)
			).join('');

			// Render resume items
			const resumeContainer = document.getElementById('resumeContainer');
			resumeContainer.innerHTML = data.resume.map((item, index) =>
				createResumeItem(item, index)
			).join('');

			// Create particles
			createParticles();

			// Hide loading screen and show content
			setTimeout(() => {
				// Force scroll to top one more time
				forceScrollToTop();

				// Hide loading screen
				const loadingScreen = document.querySelector('.loading');
				loadingScreen.style.opacity = '0';
				loadingScreen.style.transition = 'opacity 0.3s ease';

				setTimeout(() => {
					loadingScreen.style.display = 'none';
					document.getElementById('content').classList.remove('hidden');

					// Final scroll to top
					requestAnimationFrame(() => {
						forceScrollToTop();
						// Initialize animations after content is shown
						initializeAnimations();
						// Initialize navigation after content is ready
						initializeNavigation();
					});
				}, 300);
			}, 1200);
		}

		function initializeAnimations() {
			const observerOptions = {
				root: null,
				rootMargin: '0px 0px -100px 0px',
				threshold: 0.1
			};

			const observer = new IntersectionObserver((entries) => {
				entries.forEach(entry => {
					if (entry.isIntersecting) {
						entry.target.classList.add('visible');
					}
				});
			}, observerOptions);

			// Observe all animated elements
			document.querySelectorAll('.fade-up, .slide-in-left, .slide-in-right').forEach((el) => {
				observer.observe(el);
			});
		}

		// Initialize the page when DOM is loaded
		document.addEventListener('DOMContentLoaded', () => {
			// Force initial scroll to top
			forceScrollToTop();

			// Set initial mobile viewport height
			setMobileVH();

			// Initialize page
			initializePage();

			// Handle mobile viewport changes
			window.addEventListener('resize', () => {
				setMobileVH();
				if (window.pageYOffset < 100) {
					forceScrollToTop();
				}
			});

			// Handle orientation change
			window.addEventListener('orientationchange', () => {
				setTimeout(() => {
					setMobileVH();
					if (window.pageYOffset < 100) {
						forceScrollToTop();
					}
				}, 300);
			});
		});

		// Handle page load
		window.addEventListener('load', () => {
			setTimeout(() => {
				forceScrollToTop();
			}, 100);
		});

		// Prevent back/forward cache issues
		window.addEventListener('pageshow', (event) => {
			if (event.persisted) {
				forceScrollToTop();
			}
		});
	</script>

	<!-- Start of StatCounter Code -->
	<script>
		var sc_project = 2905188;
		var sc_invisible = 1;
		var sc_security = "5bd24ec6";
	</script>

	<script src="//www.statcounter.com/counter/counter.js"></script>
	<noscript>
		<div class="statcounter">
			<a title="tumblr tracker" href="//www.statcounter.com/tumblr/" target="_blank">
				<img class="statcounter" src="//c.statcounter.com/2905188/0/5bd24ec6/1/" alt="tumblr tracker" />
			</a>
		</div>
	</noscript>
	<!-- End of StatCounter Code -->
</body>

</html>